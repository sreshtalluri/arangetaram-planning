---
phase: 03-event-planning-discovery
plan: 05
type: execute
wave: 3
depends_on: ["03-01", "03-02"]
files_modified:
  - frontend/src/components/dashboard/EventCard.tsx
  - frontend/src/components/dashboard/CategoryProgress.tsx
  - frontend/src/components/dashboard/SavedVendorsList.tsx
  - frontend/src/pages/UserDashboard.jsx
autonomous: true

must_haves:
  truths:
    - "User can view their events on dashboard"
    - "User can see category coverage status for each event"
    - "User can view saved vendors"
    - "Dashboard shows quick actions for event management"
    - "Category progress shows X/Y categories covered"
  artifacts:
    - path: "frontend/src/components/dashboard/EventCard.tsx"
      provides: "Event summary card with category status"
      min_lines: 60
    - path: "frontend/src/components/dashboard/CategoryProgress.tsx"
      provides: "Visual progress ring/bar for categories"
      min_lines: 40
    - path: "frontend/src/components/dashboard/SavedVendorsList.tsx"
      provides: "Grid of saved vendors"
      min_lines: 40
    - path: "frontend/src/pages/UserDashboard.jsx"
      provides: "Rebuilt with events and saved vendors"
      min_lines: 150
  key_links:
    - from: "frontend/src/pages/UserDashboard.jsx"
      to: "frontend/src/hooks/useEvents.ts"
      via: "useEvents hook"
      pattern: "useEvents"
    - from: "frontend/src/pages/UserDashboard.jsx"
      to: "frontend/src/hooks/useSavedVendors.ts"
      via: "useSavedVendors hook"
      pattern: "useSavedVendors"
---

<objective>
Rebuild UserDashboard with events list, category progress tracking, and saved vendors section.

Purpose: Give users a central hub to manage their event planning progress
Output: Dashboard showing events with category coverage, saved vendors, and quick actions
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/03-event-planning-discovery/03-CONTEXT.md
@.planning/phases/03-event-planning-discovery/03-RESEARCH.md
@.planning/phases/03-event-planning-discovery/03-01-SUMMARY.md
@.planning/phases/03-event-planning-discovery/03-02-SUMMARY.md

# Page to rebuild
@frontend/src/pages/UserDashboard.jsx
@frontend/src/lib/vendor-categories.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create dashboard components</name>
  <files>
    frontend/src/components/dashboard/EventCard.tsx
    frontend/src/components/dashboard/CategoryProgress.tsx
    frontend/src/components/dashboard/SavedVendorsList.tsx
  </files>
  <action>
**EventCard.tsx:**
```typescript
interface EventCardProps {
  event: Event
  onEdit?: () => void
  onBrowseVendors?: () => void
}
```

Display:
- Event name as title
- Event date formatted nicely (e.g., "March 15, 2026")
- Location, guest count, budget (if set) as metadata row
- CategoryProgress component showing coverage
- Quick actions: "Edit Event", "Browse Vendors"
- Link to vendor browse with category filter for uncovered categories

Card styling: bg-white rounded-xl shadow-sm p-6, hover shadow effect

**CategoryProgress.tsx:**
```typescript
interface CategoryProgressProps {
  needed: string[]      // categories_needed array
  covered: string[]     // categories_covered array
  compact?: boolean     // true for inline, false for detailed
}
```

Two modes:
1. **compact=true**: Simple text "4/7 categories covered"
2. **compact=false** (default): Visual progress ring + category breakdown

Progress ring (from RESEARCH.md):
- SVG circle with stroke-dasharray
- Show X/Y in center
- Color: teal (#0F4C5C) for progress

Category breakdown (when not compact):
- List needed categories
- Show checkmark for covered ones
- Show empty circle for pending ones
- Click pending category -> navigate to /vendors?category=X

**SavedVendorsList.tsx:**
```typescript
interface SavedVendorsListProps {
  userId: string
}
```

- Use useSavedVendors(userId) hook
- Display saved vendors in a horizontal scroll or 2-column grid
- Each vendor: thumbnail, name, category, price range
- Link to vendor detail page
- "Unsave" button (x or heart toggle)
- Empty state: "No saved vendors yet. Browse vendors to save favorites."
  </action>
  <verify>TypeScript compiles: `cd frontend && npx tsc --noEmit`</verify>
  <done>EventCard, CategoryProgress, SavedVendorsList components created</done>
</task>

<task type="auto">
  <name>Task 2: Rebuild UserDashboard page</name>
  <files>frontend/src/pages/UserDashboard.jsx</files>
  <action>
Replace current dashboard implementation with Supabase-powered version:

**Data fetching:**
- Remove legacy eventAPI and bookingAPI calls
- Use useEvents(user?.id) hook
- Use useSavedVendors(user?.id) hook
- Loading states for each section

**Layout structure:**
```jsx
<div className="min-h-screen bg-[#F9F8F4]">
  <Navbar />
  <div className="max-w-7xl mx-auto px-4 py-8">
    {/* Header with welcome + Create Event button */}
    <header>...</header>

    {/* Main content grid */}
    <div className="grid lg:grid-cols-3 gap-8">
      {/* Left column - Events (spans 2 cols on lg) */}
      <div className="lg:col-span-2 space-y-6">
        <section>
          <h2>My Events</h2>
          {events.map(event => <EventCard key={event.id} event={event} />)}
          {events.length === 0 && <EmptyEventsState />}
        </section>
      </div>

      {/* Right column - Saved Vendors + Quick Actions */}
      <div className="space-y-6">
        <section>
          <h2>Saved Vendors</h2>
          <SavedVendorsList userId={user.id} />
        </section>

        <section>
          <h2>Quick Actions</h2>
          {/* Action cards */}
        </section>
      </div>
    </div>
  </div>
</div>
```

**Quick Actions section:**
- "Create Event" -> /events/create
- "Browse All Vendors" -> /vendors
- "Search Vendors" -> /vendors with search focus

**Empty states:**
- No events: "Start planning your Arangetram" + Create Event button
- No saved vendors: "Save vendors you like while browsing"

**Event card actions:**
- Edit: Navigate to /events/create?edit={eventId}
- Browse Vendors: Navigate to /vendors?eventDate={event.event_date}

Remove the old Tabs component structure (Events/Bookings tabs).
Bookings tab functionality moves to Phase 5 (Inquiry system).
  </action>
  <verify>
Login as user, visit /dashboard
Events from Supabase shown
Saved vendors section shows data from saved_vendors table
Quick actions navigate correctly
  </verify>
  <done>
UserDashboard rebuilt with events, category progress, saved vendors
  </done>
</task>

</tasks>

<verification>
After all tasks:
1. Login as user, visit /dashboard
2. See welcome header with user's name
3. Events section shows all user's events (or empty state)
4. Each event card shows category progress (X/Y covered)
5. Saved vendors section shows saved vendors (or empty state)
6. Click "Create Event" -> goes to /events/create
7. Click "Edit" on event -> goes to /events/create?edit=eventId
8. Click "Browse Vendors" on event -> goes to /vendors?eventDate=eventDate
9. Category progress ring renders correctly with percentage
</verification>

<success_criteria>
- Dashboard loads events from Supabase via useEvents hook
- Dashboard loads saved vendors via useSavedVendors hook
- EventCard shows event details + category progress
- CategoryProgress shows visual ring + X/Y coverage
- SavedVendorsList shows saved vendors with links
- Quick actions provide easy navigation
- Empty states guide user to create content
- No legacy API calls (eventAPI, bookingAPI removed from this page)
</success_criteria>

<output>
After completion, create `.planning/phases/03-event-planning-discovery/03-05-SUMMARY.md`
</output>
